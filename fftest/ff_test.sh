#!/bin/sh
#https://trac.ffmpeg.org/wiki/Encode/MPEG-4
#/home/root/bin/ffmpeg/ffmpeg -i vid1.mp4 -i vid2.mp4 -filter_complex "nullsrc=size=2560x720 [base]; [0:v] setpts=PTS-STARTPTS, scale=1280x720 [left]; [1:v] setpts=PTS-STARTPTS, scale=1280x720 [right]; [base][left] overlay=shortest=1 [tmp1]; [tmp1][right] overlay=shortest=1:x=1280" -c:v libx264 out.mp4

#/home/root/bin/ffmpeg/ffmpeg -i vid1.mp4 -i vid2.mp4 -filter_complex "nullsrc=size=2560x720 [base]; [0:v] setpts=PTS-STARTPTS, scale=1280x720 [left]; [1:v] setpts=PTS-STARTPTS, scale=1280x720 [right]; [base][left] overlay=shortest=1 [tmp1]; [tmp1][right] overlay=shortest=1:x=1280" -c:v libvpx-vp9 -crf 62 -b:v 500k -c:a libvorbis output.webm

/home/root/bin/ffmpeg/ffmpeg -threads 0 -i vid1.mp4 -i vid2.mp4 -filter_complex "nullsrc=size=2560x720 [base]; [0:v] setpts=PTS-STARTPTS, scale=1280x720 [left]; [1:v] setpts=PTS-STARTPTS, scale=1280x720 [right]; [base][left] overlay=shortest=1 [tmp1]; [tmp1][right] overlay=shortest=1:x=1280" -b 384k -codec:v h264 -flags +loop+mv4 -cmp 256 -partitions +parti4x4+parti8x8+partp4x4+partp8x8+partb8x8 -subq 7 -trellis 1 -refs 5 -bf 0 -flags2 +mixed_refs -coder 0 -me_range 16 -g 250 -keyint_min 25 -sc_threshold 40 -i_qfactor 0.71 -qmin 10 -qmax 51 -qdiff 4 -acodec aac /home/root/victim-locator/web/client/output_file.mp4

#/home/root/bin/ffmpeg/ffmpeg -threads 0 -i vid1.mp4 -i vid2.mp4 -filter_complex "nullsrc=size=2560x720 [base]; [0:v] setpts=PTS-STARTPTS, scale=1280x720 [left]; [1:v] setpts=PTS-STARTPTS, scale=1280x720 [right]; [base][left] overlay=shortest=1 [tmp1]; [tmp1][right] overlay=shortest=1:x=1280" -codec:v mpeg4 -profile:v baseline -level 3.0 -preset ultrafast -pix_fmt yuv420p -b:v 500k -maxrate 500k -bufsize 1000k -threads 0 -an /home/root/victim-locator/web/client/output_file.mp4